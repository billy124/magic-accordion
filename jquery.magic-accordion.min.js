/*!
* 	jQuery Magic Accordion
* 	https://github.com/lukesnowden/magic-accordion
* 	Copyright 2014 Luke Snowden
* 	Released under the MIT license:
* 	http://www.opensource.org/licenses/mit-license.php
*/
!function(a){a.fn.magicAccordion=function(e){var e=a.extend({headingTag:"h2",bodyClass:"body",headClass:"head",activeClass:"active",speed:200},e),s=function(s){var i=a(s),d=[],n=a('<div class="magic-accordion"></div>');a("> "+e.headingTag,i).each(function(){var s=a(this),i=[],n=!1;s.nextAll().each(function(){var s=a(this);n||s[0].tagName.toLowerCase()===e.headingTag?n=!0:i.push(s[0])}),d.push({heading:s[0],content:i})});for(var t in d){var o=a(d[t].heading).addClass(e.headClass),c=a("<div></div>").addClass(e.bodyClass);o.appendTo(n);for(var l in d[t].content)a(d[t].content[l]).appendTo(c);c.appendTo(n)}i.replaceWith(n),a("."+e.bodyClass,n).slideUp(0);var h=function(){var e=a.Event("closed.magic");e.head=a(this).prev(),e.body=a(this),e.index=Math.floor(a(this).index()/2),n.trigger(e)},r=function(){var e=a.Event("opened.magic");e.head=o,e.body=a(this),e.index=Math.floor(a(this).index()/2),n.trigger(e)};a("."+e.headClass,n).bind("click.magic",function(s){s.preventDefault();var i=a(this);a("."+e.headClass+"."+e.activeClass,n).removeClass(e.activeClass),i.addClass(e.activeClass);var d=a("."+e.bodyClass+":visible",n),t=i.next();d.get(0)!==t.get(0)?(t.slideDown(e.speed,r),d.slideUp(e.speed,h)):(a("."+e.headClass+"."+e.activeClass,n).removeClass(e.activeClass),d.slideUp(e.speed,h))}),n.data("magicAccordion",this)};return a(this).each(function(a){new s(this,a)})}}(jQuery);