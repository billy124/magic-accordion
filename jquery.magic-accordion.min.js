/*!
* 	jQuery Magic Accordion
* 	https://github.com/lukesnowden/magic-accordion
* 	Copyright 2014 Luke Snowden
* 	Released under the MIT license:
* 	http://www.opensource.org/licenses/mit-license.php
*/
!function(e){e.fn.magicAccordion=function(i){var i=e.extend({headingTag:"h2",bodyClass:"body",headClass:"head",activeClass:"active",easing:"linear",speed:200},i),a=function(a){var n,s=e(a),t=[],o=function(){var i=e.Event("created.magic");i.sections=t,i.accordion=n,s.trigger(i)},d=function(){t=[],n=e('<div class="magic-accordion"></div>'),e("> "+i.headingTag,s).each(function(){var a=e(this),n=[],s=!1;a.nextAll().each(function(){var a=e(this);s||a[0].tagName.toLowerCase()===i.headingTag?s=!0:n.push(a.clone())}),t.push({heading:a.clone(),content:n})})},c=function(){for(var a in t){var d=t[a].heading.addClass(i.headClass),c=e("<div></div>").addClass(i.bodyClass);d.appendTo(n);for(var r in t[a].content)t[a].content[r].appendTo(c);c.appendTo(n)}n.insertAfter(s),e("."+i.bodyClass,n).slideUp(0),s.hide(),o()},r=function(){e("."+i.headClass,n).unbind("click.magic").bind("click.magic",function(a){a.preventDefault();var t=e(this),o=function(){var i=e.Event("closed.magic");i.head=e(this).prev(),i.body=e(this),i.index=Math.floor(e(this).index()/2),s.trigger(i)},d=function(){var i=e.Event("opened.magic");i.head=t,i.body=e(this),i.index=Math.floor(e(this).index()/2),s.trigger(i)};e("."+i.headClass+"."+i.activeClass,n).removeClass(i.activeClass),t.addClass(i.activeClass);var c=e("."+i.bodyClass+":visible",n),r=t.next();c.get(0)!==r.get(0)?(r.slideDown({complete:d,duration:i.speed,easing:i.easing}),c.slideUp({complete:o,duration:i.speed,easing:i.easing})):(e("."+i.headClass+"."+i.activeClass,n).removeClass(i.activeClass),c.slideUp({complete:o,duration:i.speed,easing:i.easing}))})};this.unbind=function(){s.is(":visible")||(n.remove(),s.show())},this.rebind=function(){s.is(":visible")&&(d(),c(),r())},this.object=function(){return{accordion:n,sections:t}},d(),c(),r(),s.data("magic-accordion",this)};return e(this).each(function(e){new a(this,e)})}}(jQuery);