/*!
* 	jQuery Magic Accordion
* 	https://github.com/lukesnowden/magic-accordion
* 	Copyright 2014 Luke Snowden
* 	Released under the MIT license:
* 	http://www.opensource.org/licenses/mit-license.php
*/
!function(e){e.fn.magicAccordion=function(a){var a=e.extend({headingTag:"h2",bodyClass:"body",headClass:"head",activeClass:"active",speed:200},a),i=function(i){var s,n=e(i),t=[],d=function(){t=[],s=e('<div class="magic-accordion"></div>'),e("> "+a.headingTag,n).each(function(){var i=e(this),s=[],n=!1;i.nextAll().each(function(){var i=e(this);n||i[0].tagName.toLowerCase()===a.headingTag?n=!0:s.push(i.clone())}),t.push({heading:i.clone(),content:s})})},o=function(){for(var i in t){var d=t[i].heading.addClass(a.headClass),o=e("<div></div>").addClass(a.bodyClass);d.appendTo(s);for(var c in t[i].content)t[i].content[c].appendTo(o);o.appendTo(s)}s.insertAfter(n),e("."+a.bodyClass,s).slideUp(0),n.hide()},c=function(){e("."+a.headClass,s).unbind("click.magic").bind("click.magic",function(i){i.preventDefault();var t=e(this),d=function(){var a=e.Event("closed.magic");a.head=e(this).prev(),a.body=e(this),a.index=Math.floor(e(this).index()/2),n.trigger(a)},o=function(){var a=e.Event("opened.magic");a.head=t,a.body=e(this),a.index=Math.floor(e(this).index()/2),n.trigger(a)};e("."+a.headClass+"."+a.activeClass,s).removeClass(a.activeClass),t.addClass(a.activeClass);var c=e("."+a.bodyClass+":visible",s),l=t.next();c.get(0)!==l.get(0)?(l.slideDown(a.speed,o),c.slideUp(a.speed,d)):(e("."+a.headClass+"."+a.activeClass,s).removeClass(a.activeClass),c.slideUp(a.speed,d))})};this.unbind=function(){n.is(":visible")||(s.remove(),n.show())},this.rebind=function(){n.is(":visible")&&(d(),o(),c())},d(),o(),c(),n.data("magic-accordion",this)};return e(this).each(function(e){new i(this,e)})}}(jQuery);