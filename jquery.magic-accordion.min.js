/*!
* 	jQuery Magic Accordion
* 	https://github.com/lukesnowden/magic-accordion
* 	Copyright 2014 Luke Snowden
* 	Released under the MIT license:
* 	http://www.opensource.org/licenses/mit-license.php
*/
!function(e){e.fn.magicAccordion=function(a){var a=e.extend({headingTag:"h2",bodyClass:"body",headClass:"head",activeClass:"active",easing:"linear",speed:200},a),i=function(i){var n,s=e(i),t=[],d=function(){t=[],n=e('<div class="magic-accordion"></div>'),e("> "+a.headingTag,s).each(function(){var i=e(this),n=[],s=!1;i.nextAll().each(function(){var i=e(this);s||i[0].tagName.toLowerCase()===a.headingTag?s=!0:n.push(i.clone())}),t.push({heading:i.clone(),content:n})})},o=function(){for(var i in t){var d=t[i].heading.addClass(a.headClass),o=e("<div></div>").addClass(a.bodyClass);d.appendTo(n);for(var c in t[i].content)t[i].content[c].appendTo(o);o.appendTo(n)}n.insertAfter(s),e("."+a.bodyClass,n).slideUp(0),s.hide()},c=function(){e("."+a.headClass,n).unbind("click.magic").bind("click.magic",function(i){i.preventDefault();var t=e(this),d=function(){var a=e.Event("closed.magic");a.head=e(this).prev(),a.body=e(this),a.index=Math.floor(e(this).index()/2),s.trigger(a)},o=function(){var a=e.Event("opened.magic");a.head=t,a.body=e(this),a.index=Math.floor(e(this).index()/2),s.trigger(a)};e("."+a.headClass+"."+a.activeClass,n).removeClass(a.activeClass),t.addClass(a.activeClass);var c=e("."+a.bodyClass+":visible",n),l=t.next();c.get(0)!==l.get(0)?(l.slideDown({complete:o,duration:a.speed,easing:a.easing}),c.slideUp({complete:d,duration:a.speed,easing:a.easing})):(e("."+a.headClass+"."+a.activeClass,n).removeClass(a.activeClass),c.slideUp({complete:d,duration:a.speed,easing:a.easing}))})};this.unbind=function(){s.is(":visible")||(n.remove(),s.show())},this.rebind=function(){s.is(":visible")&&(d(),o(),c())},d(),o(),c(),s.data("magic-accordion",this)};return e(this).each(function(e){new i(this,e)})}}(jQuery);